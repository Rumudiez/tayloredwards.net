---
layout: default
title: Everydays Archive
permalink: /everydays/
---
<style>
table {
  margin: auto;
}
th,
td {
  width: 1.33em;
}
th {
  font-size: 1em;
  font-weight: normal;
}
.highlight {
  background: #38B7BB;
  border-radius: 50%;
  color: white;
}
</style>

{% assign months = "0|31|29|31|30|31|30|31|31|30|31|30|31"|split:"|" %}

<div class="row">
  <article class="column-2">
    <h2>Everydays</h2>
    <p>These pieces are part of my everydays project, for which I'm making something every[week]day under the themes of motion design and 3D modeling.</p>
  </article>
</div>
<div class="row">
  <!-- cycle all posts in reverse for years to display -->
  {% for post in site.posts reversed %}
    {% assign currentYear = post.date|date:"%Y" %}
    <!-- if new year -->
    {% if currentYear != lastYear %}
      <!-- display the year -->
      <h1>{{ currentYear }}</h1>
      <!-- cycle all posts in reverse for months to display -->
      {% for post in site.posts reversed %}
        {% assign year = post.date|date:"%Y" %}
        {% assign currentMonth = post.date|date:"%m"|plus:0 %}
        <!-- only display posts from within the current year -->
        {% if year == currentYear %}
          <!-- if new month -->
          {% if currentMonth != lastMonth %}
            <!-- display the month -->
            <h3>{{ post.date|date:"%B" }}</h3>
            <table>
              <tr>
                <th>Su</th>
                <th>M</th>
                <th>Tu</th>
                <th>W</th>
                <th>Th</th>
                <th>F</th>
                <th>Sa</th>
              </tr>
              <tr>
                <!-- reset for lastDay to trigger 'new month' if block -->
                {% assign lastDay = null %}
                {% assign weekCycle = -1 %}
                <!-- cycle through all posts for days to display -->
                {% for post in site.posts reversed %}
                  {% assign month = post.date|date:"%m"|plus:0 %}
                  {% assign currentDay = post.date|date:"%-d" %}
                  {% assign previousDay = currentDay|minus:1 %}
                  <!-- only display posts from within the current month -->
                  {% if month == currentMonth %}
                    <!-- if new month -->
                    {% if currentDay != lastDay %}
                      <!-- if first post of the month -->
                      {% if lastDay == null %}
                        <!-- (day of week) - ( (day of month)modulo(7) ) + 1 = (first of month) -->
                        {% assign day    = post.date|date:"%-d" %}
                        {% assign mod    = day|modulo:7 %}
                        {% assign target = post.date|date:"%w" %}
                        {% assign target = target|minus:mod %}
                        <!-- convert negative references to positive -->
                        {% if target < -1 %}
                          {% assign target = target|plus:7 %}
                        {% endif %}

                        {% for i in (0..target) %}
                          {% assign weekCycle = weekCycle|plus:1 %}
                          <td>&nbsp;</td>
                        {% endfor %}

                        {% for i in (1..previousDay) %}
                          {% if weekCycle >= 6 %}
                            {% assign weekCycle = 0 %}
                            <tr></tr>
                          {% else %}
                            {% assign weekCycle = weekCycle|plus:1 %}
                          {% endif %}
                          <td>{{ i }}</td>
                        {% endfor %}
                      <!-- if previous posts in month -->
                      {% else %}
                        {% for i in (lastDay..previousDay) %}
                          {% if weekCycle >= 6 %}
                            {% assign weekCycle = 0 %}
                            <tr></tr>
                          {% else %}
                            {% assign weekCycle = weekCycle|plus:1 %}
                          {% endif %}
                          <td>{{ i }}</td>
                        {% endfor %}
                      {% endif %}
                      {% if weekCycle >= 6 %}
                        {% assign weekCycle = 0 %}
                        <tr></tr>
                      {% else %}
                        {% assign weekCycle = weekCycle|plus:1 %}
                      {% endif %}
                      <td class="highlight" data-title="{{ post.title }}">{{ currentDay }}</td>
                    {% endif %}
                    {% assign lastDay = currentDay|plus:1 %}
                  {% endif %}
                {% endfor %}
              {% assign monthLength = months[currentMonth] %}
              {% for i in (lastDay..monthLength) %}
                {% if weekCycle >= 6 %}
                  {% assign weekCycle = 0 %}
                  <tr></tr>
                {% else %}
                  {% assign weekCycle = weekCycle|plus:1 %}
                {% endif %}
                <td>{{ i }}</td>
              {% endfor %}
              </tr>
          {% endif %}
          </table>
        {% endif %}
        {% assign lastMonth = currentMonth %}
      {% endfor %}
    {% endif %}
    {% assign lastYear = currentYear %}
  {% endfor %}
</div>
